<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ff6b35">
    <title>Vendor Details - RoadBite</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="manifest" href="../manifest.json">
</head>
<body>
    <header>
        <div class="header-content">
            <a href="home.html" style="color: var(--text-primary); font-size: 24px;"><i class="fas fa-arrow-left"></i></a>
            <h1 style="margin: 0; font-size: 20px;">Vendor Details</h1>
            <button style="background: none; border: none; color: var(--text-primary); font-size: 24px; cursor: pointer;">
                <i class="fas fa-heart"></i>
            </button>
        </div>
    </header>

    <main style="padding-bottom: 80px;">
        <div class="container">
            <!-- Vendor Header -->
            <div class="card">
                <div style="width: 100%; height: 200px; background: var(--bg-gradient); border-radius: var(--radius-md); margin-bottom: 16px;"></div>
                <h1 style="font-size: 28px; margin-bottom: 8px;">Mama Nkechi's Kitchen</h1>
                <p style="color: var(--text-secondary); margin-bottom: 12px;"><i class="fas fa-utensils"></i> Traditional Nigerian • Soups & Swallows</p>
                <p style="color: var(--text-secondary); margin-bottom: 12px;"><i class="fas fa-map-marker-alt"></i> Lagos-Ibadan Expressway, Mowe-Ofada, Ogun State</p>
                
                <div style="display: flex; gap: 16px; margin-bottom: 16px;">
                    <div style="display: flex; align-items: center; gap: 4px;">
                        <i class="fas fa-star" style="color: #fbbf24;"></i>
                        <span style="font-weight: 600;">4.7</span>
                        <span style="color: var(--text-secondary);">(120 reviews)</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 4px;">
                        <i class="fas fa-store" style="color: var(--text-secondary);"></i>
                        <span>Pickup available</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 4px;">
                        <i class="fas fa-clock" style="color: var(--text-secondary);"></i>
                        <span>Best pickup: 12:30–14:30</span>
                    </div>
                </div>

                <div style="display: flex; gap: 8px;">
                    <button class="btn btn-primary" style="flex: 1;"><i class="fas fa-phone"></i> Call</button>
                    <button class="btn btn-secondary" style="flex: 1;"><i class="fas fa-directions"></i> Directions</button>
                    <button class="btn btn-primary" id="openPreorder" style="flex: 1;"><i class="fas fa-bag-shopping"></i> Pre-order Pickup</button>
                </div>
            </div>

            <!-- Menu Items -->
            <div class="card">
                <h2 class="card-header">Menu</h2>

                <div class="menu-item">
                    <div style="display: flex; gap: 16px; flex: 1;">
                        <div style="width: 80px; height: 80px; background: var(--bg-gradient); border-radius: var(--radius-sm);"></div>
                        <div style="flex: 1;">
                            <h3 style="font-size: 16px; margin-bottom: 4px;">Egusi Soup with Pounded Yam</h3>
                            <p style="font-size: 14px; color: var(--text-secondary); margin-bottom: 8px;">Fresh egusi soup with choice of meat</p>
                            <p style="font-weight: 700; color: var(--primary-color);">₦1,500</p>
                        </div>
                    </div>
                    <button class="btn btn-primary add-preorder" data-item="Egusi Soup with Pounded Yam" data-price="1500" style="padding: 8px 16px; white-space: nowrap;">Add</button>
                </div>

                <div class="menu-item">
                    <div style="display: flex; gap: 16px; flex: 1;">
                        <div style="width: 80px; height: 80px; background: var(--bg-gradient); border-radius: var(--radius-sm);"></div>
                        <div style="flex: 1;">
                            <h3 style="font-size: 16px; margin-bottom: 4px;">Efo Riro with Eba</h3>
                            <p style="font-size: 14px; color: var(--text-secondary); margin-bottom: 8px;">Vegetable soup with assorted meat</p>
                            <p style="font-weight: 700; color: var(--primary-color);">₦1,300</p>
                        </div>
                    </div>
                    <button class="btn btn-primary add-preorder" data-item="Efo Riro with Eba" data-price="1300" style="padding: 8px 16px; white-space: nowrap;">Add</button>
                </div>

                <div class="menu-item">
                    <div style="display: flex; gap: 16px; flex: 1;">
                        <div style="width: 80px; height: 80px; background: var(--bg-gradient); border-radius: var(--radius-sm);"></div>
                        <div style="flex: 1;">
                            <h3 style="font-size: 16px; margin-bottom: 4px;">Oha Soup with Fufu</h3>
                            <p style="font-size: 14px; color: var(--text-secondary); margin-bottom: 8px;">Traditional Igbo soup with stockfish</p>
                            <p style="font-weight: 700; color: var(--primary-color);">₦1,700</p>
                        </div>
                    </div>
                    <button class="btn btn-primary add-preorder" data-item="Oha Soup with Fufu" data-price="1700" style="padding: 8px 16px; white-space: nowrap;">Add</button>
                </div>

                <div class="menu-item">
                    <div style="display: flex; gap: 16px; flex: 1;">
                        <div style="width: 80px; height: 80px; background: var(--bg-gradient); border-radius: var(--radius-sm);"></div>
                        <div style="flex: 1;">
                            <h3 style="font-size: 16px; margin-bottom: 4px;">Bitterleaf Soup with Semovita</h3>
                            <p style="font-size: 14px; color: var(--text-secondary); margin-bottom: 8px;">Rich bitterleaf soup with goat meat</p>
                            <p style="font-weight: 700; color: var(--primary-color);">₦1,600</p>
                        </div>
                    </div>
                    <button class="btn btn-primary add-preorder" data-item="Bitterleaf Soup with Semovita" data-price="1600" style="padding: 8px 16px; white-space: nowrap;">Add</button>
                </div>
            </div>

            <!-- Reviews -->
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;">
                    <h2 class="card-header" style="margin: 0;">Reviews (120)</h2>
                    <button class="btn btn-secondary" style="padding: 6px 12px; font-size: 14px;">Write Review</button>
                </div>

                <div style="border-bottom: 1px solid var(--border-color); padding: 16px 0;">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                        <div>
                            <p style="font-weight: 600; margin-bottom: 4px;">Chinedu O.</p>
                            <div style="color: #fbbf24; font-size: 14px;">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        </div>
                        <span style="font-size: 12px; color: var(--text-secondary);">2 days ago</span>
                    </div>
                    <p style="color: var(--text-secondary);">Best egusi soup in Lagos! The pounded yam is always fresh and the portions are generous. Highly recommend!</p>
                </div>

                <div style="border-bottom: 1px solid var(--border-color); padding: 16px 0;">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                        <div>
                            <p style="font-weight: 600; margin-bottom: 4px;">Amara B.</p>
                            <div style="color: #fbbf24; font-size: 14px;">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                            </div>
                        </div>
                        <span style="font-size: 12px; color: var(--text-secondary);">1 week ago</span>
                    </div>
                    <p style="color: var(--text-secondary);">Great food! Delivery was a bit slow but worth the wait. The oha soup tastes just like home cooking.</p>
                </div>

                <div style="padding: 16px 0;">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 8px;">
                        <div>
                            <p style="font-weight: 600; margin-bottom: 4px;">Tunde A.</p>
                            <div style="color: #fbbf24; font-size: 14px;">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>
                        </div>
                        <span style="font-size: 12px; color: var(--text-secondary);">2 weeks ago</span>
                    </div>
                    <p style="color: var(--text-secondary);">Excellent service and authentic Nigerian cuisine. Mama Nkechi's Kitchen never disappoints!</p>
                </div>

                <button class="btn btn-secondary btn-block">See All Reviews</button>
            </div>
        </div>
    </main>

    <!-- Pre-order Modal -->
    <div class="modal hide" id="preorderModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Pre-order Pickup</h3>
                <button class="modal-close" id="closePreorder"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="info-item">
                    <span class="info-label">Selected Item</span>
                    <span class="info-value" id="poItem">—</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Price</span>
                    <span class="info-value" id="poPrice">₦0</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Quantity</span>
                    <span class="info-value">
                        <input type="number" id="poQty" min="1" value="1" style="width:80px; padding:8px; border:1px solid var(--border-color); border-radius:8px;">
                    </span>
                </div>
                <div class="info-item">
                    <span class="info-label">Pickup Time</span>
                    <span class="info-value">
                        <select id="poTime" style="padding:8px; border:1px solid var(--border-color); border-radius:8px;">
                            <option>In 20 minutes</option>
                            <option>In 30 minutes</option>
                            <option>In 45 minutes</option>
                            <option>12:30 PM</option>
                            <option>1:00 PM</option>
                            <option>1:30 PM</option>
                        </select>
                    </span>
                </div>
                <div class="info-item">
                    <span class="info-label">Payment</span>
                    <span class="info-value">
                        <label style="display:flex; align-items:center; gap:8px;">
                            <input type="radio" name="poPay" value="pickup" checked> Pay at restaurant
                        </label>
                        <label style="display:flex; align-items:center; gap:8px; margin-top:6px;">
                            <input type="radio" name="poPay" value="wallet"> Pay now (Wallet)
                        </label>
                    </span>
                </div>
                <div class="info-item">
                    <span class="info-label">Total</span>
                    <span class="info-value" id="poTotal">₦0</span>
                </div>
            </div>
            <div class="modal-footer" style="display:flex; gap:8px;">
                <button class="btn btn-secondary" id="cancelPreorder">Cancel</button>
                <button class="btn btn-primary" id="confirmPreorder"><i class="fas fa-check"></i> Confirm Pre-order</button>
            </div>
        </div>
    </div>

    <script src="../assets/js/app.js"></script>
    <script>
        const modal = document.getElementById('preorderModal');
        const openBtn = document.getElementById('openPreorder');
        const closeBtn = document.getElementById('closePreorder');
        const cancelBtn = document.getElementById('cancelPreorder');
        const confirmBtn = document.getElementById('confirmPreorder');
        const poItemEl = document.getElementById('poItem');
        const poPriceEl = document.getElementById('poPrice');
        const poTotalEl = document.getElementById('poTotal');
        const qtyEl = document.getElementById('poQty');
        let currentItem = null;

        function naira(n) { return `₦${Number(n).toLocaleString()}`; }
        function openModal() { modal.classList.remove('hide'); modal.style.display = 'flex'; }
        function closeModal() { modal.classList.add('hide'); }

        function updateTotal() {
            if (!currentItem) return;
            const qty = Math.max(1, parseInt(qtyEl.value || '1', 10));
            const total = qty * currentItem.price;
            poTotalEl.textContent = naira(total);
        }

        document.querySelectorAll('.add-preorder').forEach(btn => {
            btn.addEventListener('click', () => {
                const item = btn.getAttribute('data-item');
                const price = parseInt(btn.getAttribute('data-price'), 10);
                currentItem = { item, price };
                poItemEl.textContent = item;
                poPriceEl.textContent = naira(price);
                qtyEl.value = 1;
                updateTotal();
                openModal();
            });
        });

        openBtn && openBtn.addEventListener('click', () => {
            currentItem = { item: 'Select an item from the menu', price: 0 };
            poItemEl.textContent = currentItem.item;
            poPriceEl.textContent = naira(0);
            qtyEl.value = 1;
            updateTotal();
            openModal();
        });

        qtyEl.addEventListener('input', updateTotal);
        closeBtn.addEventListener('click', closeModal);
        cancelBtn.addEventListener('click', closeModal);
        confirmBtn.addEventListener('click', () => {
            closeModal();
            if (typeof showToast === 'function') {
                showToast('Pre-order placed! We\'ll have it ready for pickup.');
            }
            window.location.href = 'orders.html';
        });
    </script>
</body>
</html>
